%%
%% Set up the colors for the bibliography.
\setbeamercolor{bibliography item}{fg=black}%
\setbeamercolor{bibliography entry author}{fg=black}%
\setbeamercolor{bibliography entry title}{fg=black}%
\setbeamercolor{bibliography entry note}{fg=black}%
%
%% Set the text style to tiny for the slides bibliography.
\AtBeginBibliography{\tiny}%
%
%
%%% We count the number of citations, in order to see if we need to print the bibliography.
\newcount\@bib@numcites%
\@bib@numcites=0%
\let\@bib@oldnocite\nocite%
\let\bracketCite\cite%
%
%
%% cite a as superscript in the text
\gdef\cite#1{\supercite{#1}\strut\relax\global\advance\@bib@numcites by 1\relax}%
%% cite a reference without putting the reference in the text
\gdef\nocite#1{\@bib@oldnocite{#1}\relax\global\advance\@bib@numcites by 1\relax}%
%
%% Fixing strange citetitle issue.
\let\@bib@oldcitetitle\citetitle%
\protected\gdef\citetitle#1{%
\let\@bib@old@glslink\glslink%
\protected\gdef\glslink##1##2{##2}%
\@bib@oldcitetitle{#1}%
\let\glslink\@bib@old@glslink%
}%
%
%% Renew the quotation environment.
\global\let\@old@cquotation\cquotation%
\protected\long\gdef\cquotation#1#2{%
\let\@@old@quotation@cite\cite%
\let\cite\bracketCite%
\begin{center}%
\resizebox{0.9\paperwidth}{!}{%
\fcolorbox{novice-hint-frame}{novice-hint-background}{\centering%
\@old@cquotation{#1}{#2}%
}}\end{center}%
\let\cite\@@old@quotation@cite%
}%
