%%
%% Commands for including questions
%

\global\newcount\@number@of@questions%
\global\@number@of@questions0\relax%
%
%%% And environment for questions
%%% #1 the question title
\newenvironment{question}[1]{%
\let\@question@old@listingFrame\listingFrame%
%
\protected\gdef\listingFrame##1{\begin{center}\begin{minipage}{\linewidth}##1\end{minipage}\end{center}}%
%
\noindent\begin{minipage}{\linewidth}%
%
\def\@@@quest@title{#1}%
\ifx\@@@quest@title\empty\relax%
\expandafter\@firstoftwo%
\else%
\expandafter\@secondoftwo%
\fi{%
{\textbf{\@last@question@title~(continued/fortgesetzt)}\par}%
}{%
\global\advance\@number@of@questions by 1\relax%
\xdef\@number@of@questions@txt{~(Q\the\@number@of@questions)}%
\hsection{\@@@quest@title\@number@of@questions@txt}%
\gdef\@last@question@title{\thesection~#1\@number@of@questions@txt}%
}%
}{%
\par\noindent%
\ifx\@@@quest@title\empty\relax%
\expandafter\@firstoftwo%
\else%
\expandafter\@secondoftwo%
\fi{}{\endhsection}%
\end{minipage}%
\global\let\listingFrame\@question@old@listingFrame%
\bigskip\par%
}%
